# _*_ coding:utf-8 _*_
import scipy
import math

def sigmod(inX, inTheta):
    t = scipy.dot(inTheta,inX)
    return 1.0/(1 + math.exp(-t))

def readData(dataPath):
    f = open(dataPath)
    X = []
    Y = []
    line = f.readline()
    while line:
        features = list(map(float,line.split('\t')[0].split(',')))
        label_y = int(line.split('\t')[1].strip())

        X.append(features)
        Y.append(label_y)
        line = f.readline()
    return X,Y

def run():
    X,Y = readData('/Users/phj/Documents/Postgraduate/BookData/BooksPredict/OriginalData/TrainData/2013-07-07_01')
    theta = [12.82951023896179, 12.169348994860764, -4.185454999644034, -4.759344986190775, -1.8725455594320861, -45.7211847764715, 14.960275115810132, 20.79479085781211, -1.3541837612290375, 4.36968573520379, 14.460813039153013, 36.11342587239606, 18.346635063757024, -2.5340007407260656, 0.9045211915677395, 6.960414741466788, 8.973318292679144, 13.29652815816976, 12.745780022972662, 12.4109503316163, -11.078909917843957, -11.399843733520203, -0.9876142000090053, -37.68881314963885, 6.756225921664997, 6.626297051915107, 2.3246031781932217, 1.3894988286830265, 9.269616995717161, 19.625476150473563, 10.212235469250421, -31.610491444387012, -16.449515230547973, 1.2439436975199922, -7.648511164357909, -14.757169276061314, 20.14231832707905, 20.069983629414356, -5.192764356148773, -5.778391135165947, -1.7240920488104094, -31.235981685209993, 5.750207946649152, 5.174094063862209, 6.620064908579021, 1.3201764216825473, 13.966767803533987, 32.32039547854616, 11.556022019967916, -77.73336104317288, -52.666545633986885, -15.864439980481379, -28.9559986771676, -70.34824484003745]

    for i in range(len(X)):
        h = sigmod(X[i],theta)
        if h > 0.5:
            if int(Y[i]) != 1:
                print i
        else:
            if int(Y[i]) != 0:
                print i
if __name__ == '__main__':
    run()